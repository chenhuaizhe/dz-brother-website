(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c8cee4c"],{"26f3":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n("9bd2");function i(e){return Object(r["a"])({url:"/api/admin/menu/tree",method:"get",params:e})}function a(e){return Object(r["a"])({url:"/api/admin/menu",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/api/admin/menu/"+e,method:"get"})}function u(e){return Object(r["a"])({url:"/api/admin/menu/"+e,method:"delete"})}function l(e,t){return Object(r["a"])({url:"/api/admin/menu/"+e,method:"put",data:t})}},8061:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:24}},[e.groupManager_menu?n("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("保存")]):e._e()],1),n("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:8}},[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),n("el-tree",{ref:"menuTree",staticClass:"filter-tree",attrs:{"check-strictly":"","node-key":e.getTreeNodeKey,data:e.treeData,"show-checkbox":"","node-key":"id","highlight-current":"",props:e.defaultProps,"filter-node-method":e.filterNode,"default-expand-all":""},on:{"node-click":e.getNodeData}})],1),n("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:16}},[n("el-table",{ref:"elementTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""},on:{select:e.handleSelectionChange}},[e.groupManager_element?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),n("el-table-column",{attrs:{width:"200px",align:"center",label:"资源编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\r\n        "+e._s(t.row.code))])]}}])}),n("el-table-column",{attrs:{width:"200px",align:"center",label:"资源类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\r\n        "+e._s(t.row.type))])]}}])}),n("el-table-column",{attrs:{width:"200px",align:"center",label:"资源名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\r\n        "+e._s(t.row.name))])]}}])}),n("el-table-column",{attrs:{width:"200px",align:"center",label:"资源地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\r\n        "+e._s(t.row.uri))])]}}])}),n("el-table-column",{attrs:{width:"200px",align:"center",label:"资源请求类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\r\n        "+e._s(t.row.method))])]}}])})],1)],1)],1)},i=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),o=n("26f3"),u=n("f2c7"),l=n("dabb"),c=n("2f62");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={props:{groupId:{default:"1"}},data:function(){return{filterText:"",list:null,total:null,listQuery:{name:void 0},treeData:[],defaultProps:{children:"children",label:"title"},groupManager_menu:!1,groupManager_element:!1}},watch:{filterText:function(e){this.$refs.menuTree.filter(e)}},created:function(){this.getList(),this.groupManager_menu=this.hasPermissions(["groupManager:menu"]),this.groupManager_element=this.hasPermissions(["groupManager:element"])},computed:d({},Object(c["c"])(["elements"])),methods:{getList:function(){var e=this;Object(o["c"])(this.listQuery).then((function(t){e.treeData=t,e.initAuthoritys()}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getNodeData:function(e){var t=this;this.listQuery.menuId=e.id,Object(u["d"])(this.listQuery).then((function(e){t.list=e.rows,Object(l["f"])(t.groupId).then((function(e){for(var n={},r=0;r<t.list.length;r++)n[t.list[r].id]=t.list[r];for(var i={},a=0;a<e.length;a++){var o=e[a];console.log(e[a]),void 0!==n[o]&&void 0===i[o]&&(t.$refs.elementTable.toggleRowSelection(n[e[a]]),i[o]=!0)}}))})),this.currentId=e.id,this.showElement=!0},getTreeNodeKey:function(e){return e.id},handleSelectionChange:function(e,t){for(var n=!0,r=0;r<e.length;r++)if(e[r].id===t.id){Object(l["a"])(this.groupId,{menuId:this.currentId,elementId:t.id}),n=!1;break}n&&Object(l["m"])(this.groupId,{menuId:this.currentId,elementId:t.id})},update:function(){var e=this;this.$emit("closeAuthorityDialog");for(var t=this.$refs.menuTree.getCheckedNodes(),n=[],r=0;r<t.length;r++)n.push(t[r].id);Object(l["j"])(this.groupId,{menuTrees:n.join()}).then((function(){e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3})}))},initAuthoritys:function(){var e=this;Object(l["g"])(this.groupId).then((function(t){for(var n=[],r=0;r<t.length;r++)n.push(t[r].id);e.$refs.menuTree.setCheckedKeys(n)}))}}},p=f,h=n("2877"),m=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=m.exports},f2c7:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n("9bd2");function i(e){return Object(r["a"])({url:"/api/admin/element/list",method:"get",params:e})}function a(e){return Object(r["a"])({url:"/api/admin/element",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/api/admin/element/"+e,method:"get"})}function u(e){return Object(r["a"])({url:"/api/admin/element/"+e,method:"delete"})}function l(e,t){return Object(r["a"])({url:"/api/admin/element/"+e,method:"put",data:t})}}}]);
//# sourceMappingURL=chunk-0c8cee4c.c93ec69e.js.map