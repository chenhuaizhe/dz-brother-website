{"version":3,"sources":["webpack:///./src/pages/nms_sys/alarmInfo/alarm.vue?ea78","webpack:///src/pages/nms_sys/alarmInfo/alarm.vue","webpack:///./src/pages/nms_sys/alarmInfo/alarm.vue?159a","webpack:///./src/pages/nms_sys/alarmInfo/alarm.vue","webpack:///./src/pages/nms_sys/compoents/instenceSelect.vue?dc9d","webpack:///src/pages/nms_sys/compoents/instenceSelect.vue","webpack:///./src/pages/nms_sys/compoents/instenceSelect.vue?372f","webpack:///./src/pages/nms_sys/compoents/instenceSelect.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","slot","attrs","on","changeInstance","staticClass","_v","staticStyle","setClick","directives","name","rawName","value","expression","tableData","indexMethod","totalRows","currentPage","$event","handleCurrentChange","dialogVisible","handleClose","ref","form","rules","model","callback","$$v","$set","submitConfig","staticRenderFns","components","data","instanceValue","timer","isFirst","timerInterval","alarm_switch","alarm_mem_threshold","alarm_cpu_threshold","alarm_hd_threshold","overload","cpu_load","mem_load","hd_load","linkbroken","chartOption","loading","methods","val","getOverload","setTimer","setInterval","console","log","getAlarmConfig","index","request_type","instance_id","sequence_no","$refs","validate","valid","deleteClick","$confirm","distinguishCancelAndClose","confirmButtonText","cancelButtonText","destroyed","clearInterval","component","isupf","_e","changeService","serviceName","_l","item","key","instanceId","split","props","type","Boolean","default","serviceOptions","instanceOptions","$store","state","d2admin","instence","serviceList","instenceList","$emit","mounted","commit","dispatch","instenceName"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,eAAe,CAACA,EAAG,WAAW,CAACE,KAAK,UAAU,CAACF,EAAG,kBAAkB,CAACG,MAAM,CAAC,OAAQ,GAAOC,GAAG,CAAC,eAAiBR,EAAIS,mBAAmB,GAAGL,EAAG,UAAU,CAACM,YAAY,YAAY,CAACN,EAAG,MAAM,CAACM,YAAY,WAAWH,MAAM,CAAC,KAAO,UAAUD,KAAK,UAAU,CAACF,EAAG,OAAO,CAACJ,EAAIW,GAAG,UAAUP,EAAG,MAAM,CAACQ,YAAY,CAAC,MAAQ,QAAQ,QAAU,UAAU,CAACR,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,UAAU,MAAQ,IAAIC,GAAG,CAAC,MAAQR,EAAIa,WAAW,CAACb,EAAIW,GAAG,WAAW,KAAKP,EAAG,WAAW,CAACU,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOjB,EAAW,QAAEkB,WAAW,YAAYN,YAAY,CAAC,MAAQ,OAAO,aAAa,QAAQL,MAAM,CAAC,KAAOP,EAAImB,UAAU,KAAO,QAAQ,OAAS,GAAG,wBAAwB,KAAK,CAACf,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,QAAQ,MAAQP,EAAIoB,YAAY,MAAQ,KAAK,MAAQ,QAAQhB,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,SAAS,KAAO,WAAW,MAAQ,QAAQH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,SAAS,KAAO,WAAW,MAAQ,mBAAmBH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,SAAS,KAAO,WAAW,MAAQ,kBAAkBH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,SAAS,KAAO,UAAU,MAAQ,mBAAmB,IAAI,GAAGH,EAAG,MAAMA,EAAG,gBAAgB,CAACG,MAAM,CAAC,WAAa,GAAG,OAAS,oBAAoB,MAAQP,EAAIqB,UAAU,eAAerB,EAAIsB,aAAad,GAAG,CAAC,qBAAqB,SAASe,GAAQvB,EAAIsB,YAAYC,GAAQ,sBAAsB,SAASA,GAAQvB,EAAIsB,YAAYC,GAAQ,iBAAiBvB,EAAIwB,uBAAuBpB,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,OAAO,QAAUP,EAAIyB,cAAc,MAAQ,QAAQ,eAAezB,EAAI0B,aAAalB,GAAG,CAAC,iBAAiB,SAASe,GAAQvB,EAAIyB,cAAcF,KAAU,CAACnB,EAAG,UAAU,CAACuB,IAAI,OAAOpB,MAAM,CAAC,MAAQP,EAAI4B,KAAK,MAAQ5B,EAAI6B,MAAM,cAAc,UAAU,CAACzB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,eAAe,UAAU,iBAAiB,WAAWuB,MAAM,CAACb,MAAOjB,EAAI4B,KAAiB,aAAEG,SAAS,SAAUC,GAAMhC,EAAIiC,KAAKjC,EAAI4B,KAAM,eAAgBI,IAAMd,WAAW,wBAAwB,GAAGd,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,KAAO,uBAAuB,CAACH,EAAG,WAAW,CAAC0B,MAAM,CAACb,MAAOjB,EAAI4B,KAAuB,mBAAEG,SAAS,SAAUC,GAAMhC,EAAIiC,KAAKjC,EAAI4B,KAAM,qBAAsBI,IAAMd,WAAW,8BAA8B,GAAGd,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,KAAO,wBAAwB,CAACH,EAAG,WAAW,CAAC0B,MAAM,CAACb,MAAOjB,EAAI4B,KAAwB,oBAAEG,SAAS,SAAUC,GAAMhC,EAAIiC,KAAKjC,EAAI4B,KAAM,sBAAuBI,IAAMd,WAAW,+BAA+B,GAAGd,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,KAAO,wBAAwB,CAACH,EAAG,WAAW,CAAC0B,MAAM,CAACb,MAAOjB,EAAI4B,KAAwB,oBAAEG,SAAS,SAAUC,GAAMhC,EAAIiC,KAAKjC,EAAI4B,KAAM,sBAAuBI,IAAMd,WAAW,+BAA+B,IAAI,GAAGd,EAAG,MAAM,CAACM,YAAY,gBAAgBH,MAAM,CAAC,KAAO,UAAUD,KAAK,UAAU,CAACF,EAAG,YAAY,CAACI,GAAG,CAAC,MAAQ,SAASe,GAAQvB,EAAIyB,eAAgB,KAAS,CAACzB,EAAIW,GAAG,SAASP,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIkC,eAAe,CAAClC,EAAIW,GAAG,UAAU,IAAI,IAAI,IACpiGwB,EAAkB,G,wBC4GtB,GACEC,WAAY,CAAd,uBACErB,KAAM,QACNsB,KAHF,WAII,MAAO,CACLhB,UAAW,EACXC,YAAa,EACbH,UAAW,GACXmB,cAAe,GACfC,MAAO,KACPC,SAAS,EACTC,cAAe,IACfhB,eAAe,EACfG,KAAM,CACJc,cAAc,EACdC,oBAAqB,KACrBC,oBAAqB,KACrBC,mBAAoB,MAEtBhB,MAAO,CACLc,oBAAqB,CAC7B,CAAU,UAAV,EAAU,QAAV,MAAU,QAAV,QACA,CAAU,KAAV,SAAU,QAAV,SAAU,QAAV,WAEQC,oBAAqB,CAC7B,CAAU,UAAV,EAAU,QAAV,MAAU,QAAV,QACA,CAAU,KAAV,SAAU,QAAV,SAAU,QAAV,WAEQC,mBAAoB,CAC5B,CAAU,UAAV,EAAU,QAAV,MAAU,QAAV,QACA,CAAU,KAAV,SAAU,QAAV,SAAU,QAAV,YAGMC,SAAU,CACRC,SAAU,EACVC,SAAU,EACVC,QAAS,GAEXC,WAAY,GACZC,YAAa,GACbC,SAAS,IAGbC,QAAS,CAEP5C,eAFJ,SAEA,GACMR,KAAKqC,cAAgBgB,EACrBrD,KAAKsD,eAUPC,SAdJ,WAcA,WACwB,MAAdvD,KAAKsC,QACPtC,KAAKsC,MAAQkB,aAAY,WACvBC,QAAQC,IAAI,mBACZ,EAAV,gBACA,sBAGI9C,SAtBJ,WAuBMZ,KAAK2D,iBACL3D,KAAKwB,eAAgB,GAGvB8B,YA3BJ,WA2BA,WACMtD,KAAKmD,SAAU,EACfM,QAAQC,MACR,OAAN,OAAM,CACN,CACQ,aAAR,YACQ,YAAR,mBACQ,YAAR,OAEA,kBAEA,kBACQ,EAAR,WACQ,QAAR,oBACA,UAGQ,EAAR,iBACQ,EAAR,sBAEA,mBACQ,EAAR,WACQ,QAAR,OACQ,EAAR,qBACU,kBAAV,KACU,SAAV,oBAIIvC,YAxDJ,SAwDA,GACM,OAAgC,IAAxBnB,KAAKqB,YAAc,GAAUuC,GAGvCrC,oBA5DJ,WA6DMvB,KAAKsD,eAEPK,eA/DJ,WA+DA,WACM,OAAN,OAAM,CAAN,CACQE,aAAc,YACdC,YAAa9D,KAAKqC,cAClB0B,YAAa,OAErB,kBACQ,EAAR,UAEA,mBACQ,QAAR,OACQ,EAAR,qBACU,kBAAV,KACU,SAAV,oBAKItC,YAjFJ,WAkFMzB,KAAKwB,eAAgB,GAEvBS,aApFJ,WAoFA,WACMjC,KAAKgE,MAAMrC,KAAKsC,UAAS,SAA/B,GACQ,IAAIC,EAkBF,OADA,QAAV,uBACA,EAjBU,EAAV,iBACU,OAAV,OAAU,CAAV,CACYL,aAAc,YACdC,YAAa,EAAzB,cACYC,YAAa,KACb3B,KAAM,EAAlB,OAEA,sBACA,mBACY,QAAZ,OACY,EAAZ,qBACc,kBAAd,KACc,SAAd,uBAUI+B,YA7GJ,WA6GA,WACMnE,KAAKoE,SAAS,UAAW,OAAQ,CAC/BC,2BAA2B,EAC3BC,kBAAmB,KACnBC,iBAAkB,OAE1B,iBACQ,EAAR,WACQ,OAAR,OAAQ,CAAR,CACU,aAAV,YACU,YAAV,gBACU,YAAV,QAEA,kBACU,EAAV,WACU,EAAV,UACY,KAAZ,KACY,QAAZ,YAGA,mBACU,EAAV,WACU,QAAV,OACU,EAAV,qBACY,kBAAZ,KACY,SAAZ,sBAIA,mBACQ,EAAR,UACU,KAAV,OACU,QAAV,aAKEC,UAAW,WAETC,cAAczE,KAAKsC,OACnBtC,KAAKsC,MAAQ,OC7S4V,I,YCOzWoC,EAAY,eACd,EACA5E,EACAoC,GACA,EACA,KACA,KACA,MAIa,aAAAwC,E,2CClBf,IAAI5E,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAGJ,EAAI4E,MAA+V5E,EAAI6E,KAA5VzE,EAAG,YAAY,CAACG,MAAM,CAAC,YAAc,QAAQ,KAAO,QAAQ,WAAa,GAAG,UAAY,IAAIC,GAAG,CAAC,OAASR,EAAI8E,eAAehD,MAAM,CAACb,MAAOjB,EAAe,YAAE+B,SAAS,SAAUC,GAAMhC,EAAI+E,YAAY/C,GAAKd,WAAW,gBAAgBlB,EAAIgF,GAAIhF,EAAkB,gBAAE,SAASiF,GAAM,OAAO7E,EAAG,YAAY,CAAC8E,IAAID,EAAK1E,MAAM,CAAC,MAAQ0E,EAAK,MAAQA,QAAU,GAAY7E,EAAG,YAAY,CAACQ,YAAY,CAAC,MAAQ,SAASL,MAAM,CAAC,YAAc,UAAU,KAAO,QAAQ,WAAa,GAAG,UAAY,IAAIC,GAAG,CAAC,OAASR,EAAIS,gBAAgBqB,MAAM,CAACb,MAAOjB,EAAiB,cAAE+B,SAAS,SAAUC,GAAMhC,EAAIsC,cAAcN,GAAKd,WAAW,kBAAkBlB,EAAIgF,GAAIhF,EAAmB,iBAAE,SAASiF,EAAKpB,GAAO,OAAOzD,EAAG,YAAY,CAAC8E,IAAIrB,EAAMtD,MAAM,CAAC,MAAQ0E,EAAKE,WAAWC,MAAM,KAAK,GAAG,MAAQH,EAAKE,iBAAgB,IAAI,IACh4BhD,EAAkB,G,ooBCsCtB,OACEpB,KAAM,iBACNsE,MAAO,CACLT,MAAO,CACLU,KAAMC,QACNC,SAAS,IAGbnD,KARF,WASI,MAAO,CACL0C,YAAa,GACbU,eAAgB,GAChBC,gBAAiB,GACjBpD,cAAe,KAIrB,cACA,0BACI,YAAJ,YAAM,OAAN,wBACI,aAAJ,YAAM,OAAN,4BAGA,OACA,YADA,WAEMrC,KAAKwF,eAAiBxF,KAAK0F,OAAOC,MAAMC,QAAQC,SAASC,YACzD9F,KAAK8E,YAAc9E,KAAKwF,eAAe,IAE7C,aALA,WAMMxF,KAAKyF,gBAAkBzF,KAAK0F,OAAOC,MAAMC,QAAQC,SAASE,aAC1D/F,KAAKqC,cAAgBrC,KAAKyF,gBAAgB,GAAGP,WAC7ClF,KAAKgG,MAAM,iBAAkBhG,KAAKqC,iBAGtC4D,QAlCF,WAmCA,YACMjG,KAAK8E,YAAc,MACnB9E,KAAK0F,OAAOQ,OAAO,kCAAmC,OACtDlG,KAAK0F,OAAOS,SAAS,wCAE3B,wDACQnG,KAAK0F,OAAOS,SAAS,uCAErBnG,KAAKwF,eAAiBxF,KAAK0F,OAAOC,MAAMC,QAAQC,SAASC,YACjE,iDACU9F,KAAK8E,YAAc9E,KAAK0F,OAAOC,MAAMC,QAAQC,SAASf,aAEhE,kDACU9E,KAAKyF,gBAAkBzF,KAAK0F,OAAOC,MAAMC,QAAQC,SAASE,cAEpE,kDACU/F,KAAKqC,cAAgBrC,KAAK0F,OAAOC,MAAMC,QAAQC,SAASO,aAAalB,WACrElF,KAAKgG,MAAM,iBAAkBhG,KAAKqC,kBAM1Ce,QAAS,CAEPyB,cAFJ,SAEA,GACWxB,GAGLrD,KAAK0F,OAAOS,SAAS,sCAAuC9C,IAG9D7C,eATJ,SASA,GACMR,KAAKgG,MAAM,iBAAkB3C,GAC7BrD,KAAK0F,OAAOQ,OAAO,kCAAmC7C,MC5G0T,I,YCOlXqB,EAAY,eACd,EACA5E,EACAoC,GACA,EACA,KACA,KACA,MAIa,OAAAwC,E","file":"js/chunk-08c2469a.aff8d226.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('d2-container',[_c('template',{slot:\"header\"},[_c('instence-select',{attrs:{\"isupf\":false},on:{\"changeInstence\":_vm.changeInstance}})],1),_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"过载告警\")]),_c('div',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.setClick}},[_vm._v(\"告警配置\")])],1)]),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.tableData,\"size\":\"small\",\"stripe\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"index\":_vm.indexMethod,\"width\":\"50\",\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"crt_time\",\"label\":\"时间\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"cpu_load\",\"label\":\"当前CPU负载值（单位%）\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"mem_load\",\"label\":\"当前内存负载值（单位%）\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"hd_load\",\"label\":\"当前硬盘负载值（单位%）\"}})],1)],1),_c('br'),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.totalRows,\"current-page\":_vm.currentPage},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"current-change\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":\"告警配置\",\"visible\":_vm.dialogVisible,\"width\":\"600px\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"110px\"}},[_c('el-form-item',{attrs:{\"label\":\"告警开关\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:(_vm.form.alarm_switch),callback:function ($$v) {_vm.$set(_vm.form, \"alarm_switch\", $$v)},expression:\"form.alarm_switch\"}})],1),_c('el-form-item',{attrs:{\"label\":\"CPU告警值\",\"prop\":\"alarm_hd_threshold\"}},[_c('el-input',{model:{value:(_vm.form.alarm_hd_threshold),callback:function ($$v) {_vm.$set(_vm.form, \"alarm_hd_threshold\", $$v)},expression:\"form.alarm_hd_threshold\"}})],1),_c('el-form-item',{attrs:{\"label\":\"内存告警值\",\"prop\":\"alarm_cpu_threshold\"}},[_c('el-input',{model:{value:(_vm.form.alarm_cpu_threshold),callback:function ($$v) {_vm.$set(_vm.form, \"alarm_cpu_threshold\", $$v)},expression:\"form.alarm_cpu_threshold\"}})],1),_c('el-form-item',{attrs:{\"label\":\"硬盘告警值\",\"prop\":\"alarm_mem_threshold\"}},[_c('el-input',{model:{value:(_vm.form.alarm_mem_threshold),callback:function ($$v) {_vm.$set(_vm.form, \"alarm_mem_threshold\", $$v)},expression:\"form.alarm_mem_threshold\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitConfig}},[_vm._v(\"确 定\")])],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 过载告警页面\n\n<template>\n  <d2-container>\n    <template slot=\"header\">\n      <instence-select :isupf=\"false\" @changeInstence=\"changeInstance\"></instence-select>\n    </template>\n\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>过载告警</span>\n        <div style=\"float: right; padding: 3px 0\">\n          <el-button size=\"mini\" type=\"primary\" plain @click=\"setClick\"\n            >告警配置</el-button\n          >\n        </div>\n        <!-- <div style=\"float: right; padding: 3px 6px\">\n          <el-button size=\"mini\" type=\"danger\" plain @click=\"deleteClick\"\n            >告警清除</el-button\n          >\n        </div> -->\n      </div>\n\n      <el-table\n        v-loading=\"loading\"\n        :data=\"tableData\"\n        size=\"small\"\n        stripe\n        highlight-current-row\n        style=\"width: 100%; margin-top: 20px\"\n      >\n        <el-table-column\n          type=\"index\"\n          :index=\"indexMethod\"\n          width=\"50\"\n          label=\"序号\"\n        ></el-table-column>\n        <!-- <el-table-column align=\"center\" prop=\"id\" label=\"ID\"></el-table-column> -->\n        <el-table-column\n          align=\"center\"\n          prop=\"crt_time\"\n          label=\"时间\"\n        ></el-table-column>\n        <el-table-column\n          align=\"center\"\n          prop=\"cpu_load\"\n          label=\"当前CPU负载值（单位%）\"\n        ></el-table-column>\n        <el-table-column\n          align=\"center\"\n          prop=\"mem_load\"\n          label=\"当前内存负载值（单位%）\"\n        ></el-table-column>\n        <el-table-column\n          align=\"center\"\n          prop=\"hd_load\"\n          label=\"当前硬盘负载值（单位%）\"\n        ></el-table-column>\n      </el-table>\n    </el-card>\n    <br />\n    <el-pagination\n      background\n      layout=\"prev, pager, next\"\n      :total=\"totalRows\"\n      :current-page.sync=\"currentPage\"\n      @current-change=\"handleCurrentChange\"\n    >\n    </el-pagination>\n    <el-dialog\n      title=\"告警配置\"\n      :visible.sync=\"dialogVisible\"\n      width=\"600px\"\n      :before-close=\"handleClose\"\n    >\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"110px\">\n        <el-form-item label=\"告警开关\">\n          <el-switch\n            v-model=\"form.alarm_switch\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#ff4949\"\n          ></el-switch>\n        </el-form-item>\n        <el-form-item label=\"CPU告警值\" prop=\"alarm_hd_threshold\">\n          <el-input v-model=\"form.alarm_hd_threshold\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"内存告警值\" prop=\"alarm_cpu_threshold\">\n          <el-input v-model=\"form.alarm_cpu_threshold\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"硬盘告警值\" prop=\"alarm_mem_threshold\">\n          <el-input v-model=\"form.alarm_mem_threshold\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitConfig\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </d2-container>\n</template>\n\n<script>\nimport {\n  fetchGetAlarmConfig,\n  fetchSetAlarmConfig,\n  fetchGetAlarmOverLoad,\n  fetchDelAlarmOvcerLoad,\n} from \"@/api/demo/index\";\nimport instenceSelect from '../compoents/instenceSelect.vue';\nexport default {\n  components: { instenceSelect },\n  name: \"alarm\",\n  data() {\n    return {\n      totalRows: 0,\n      currentPage: 1,\n      tableData: [],\n      instanceValue: \"\", //当前选中的实例\n      timer: null,\n      isFirst: true,\n      timerInterval: 10000,\n      dialogVisible: false,\n      form: {\n        alarm_switch: false,\n        alarm_mem_threshold: null,\n        alarm_cpu_threshold: null,\n        alarm_hd_threshold: null,\n      },\n      rules: {\n        alarm_mem_threshold: [\n          { required: true, message: \"请输入\", trigger: \"blur\" },\n          { type: \"number\", message: \"必须输入数字\", trigger: \"change\" },\n        ],\n        alarm_cpu_threshold: [\n          { required: true, message: \"请输入\", trigger: \"blur\" },\n          { type: \"number\", message: \"必须输入数字\", trigger: \"change\" },\n        ],\n        alarm_hd_threshold: [\n          { required: true, message: \"请输入\", trigger: \"blur\" },\n          { type: \"number\", message: \"必须输入数字\", trigger: \"change\" },\n        ],\n      },\n      overload: {\n        cpu_load: 0,\n        mem_load: 0,\n        hd_load: 0,\n      },\n      linkbroken: {},\n      chartOption: [],\n      loading: false,\n    };\n  },\n  methods: {\n    // 选择实例\n    changeInstance(val) {\n      this.instanceValue = val\n      this.getOverload();\n      // //清除定时并重启\n      // if (this.timer) {\n      //   clearInterval(this.timer);\n      //   this.timer = null;\n      //   // this.setTimer();\n      // } else {\n      //   // this.setTimer();\n      // }\n    },\n    setTimer() {\n      if (this.timer == null) {\n        this.timer = setInterval(() => {\n          console.log(\"开始定时...每过一-执行一次\");\n          this.getOverload();\n        }, this.timerInterval);\n      }\n    },\n    setClick() {\n      this.getAlarmConfig();\n      this.dialogVisible = true;\n    },\n    // 获取过载告警数据\n    getOverload() {\n      this.loading = true;\n      console.log();\n      fetchGetAlarmOverLoad(\n        {\n          request_type: \"alarm get\",\n          instance_id: this.instanceValue,\n          sequence_no: 33431,\n        },\n        this.currentPage\n      )\n        .then((response) => {\n          this.loading = false;\n          console.log(\"alarm get:\", response);\n          if (response == null) {\n            return;\n          }\n          this.tableData = response.rows;\n          this.totalRows = response.total;\n        })\n        .catch((e) => {\n          this.loading = false;\n          console.log(e);\n          this.$alert(e, \"网络请求发生错误\", {\n            confirmButtonText: \"确定\",\n            callback: (action) => {},\n          });\n        });\n    },\n    indexMethod(index) {\n      return (this.currentPage - 1) * 10 + index;\n    },\n    //分页按钮的触发事件\n    handleCurrentChange() {\n      this.getOverload();\n    },\n    getAlarmConfig() {\n      fetchGetAlarmConfig({\n        request_type: \"alarm get\",\n        instance_id: this.instanceValue,\n        sequence_no: 3342,\n      })\n        .then((response) => {\n          this.form = response;\n        })\n        .catch((e) => {\n          console.log(e);\n          this.$alert(e, \"网络请求发生错误\", {\n            confirmButtonText: \"确定\",\n            callback: (action) => {},\n          });\n        });\n    },\n\n    handleClose() {\n      this.dialogVisible = false;\n    },\n    submitConfig() {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.dialogVisible = false;\n          fetchSetAlarmConfig({\n            request_type: \"alarm set\",\n            instance_id: this.instanceValue,\n            sequence_no: 3001,\n            data: this.form,\n          })\n            .then((response) => {})\n            .catch((e) => {\n              console.log(e);\n              this.$alert(e, \"网络请求发生错误\", {\n                confirmButtonText: \"确定\",\n                callback: (action) => {},\n              });\n            });\n        } else {\n            console.log('error submit!!');\n            return false;\n          }\n        })\n    },\n    // 告警清除\n    deleteClick() {\n      this.$confirm(\"是否清除数据？\", \"确认信息\", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"确认\",\n        cancelButtonText: \"取消\",\n      })\n        .then(() => {\n          this.loading = true;\n          fetchDelAlarmOvcerLoad({\n            request_type: \"alarm del\",\n            instance_id: this.instanceValue,\n            sequence_no: 33432,\n          })\n            .then((response) => {\n              this.loading = false;\n              this.$message({\n                type: \"su\",\n                message: \"操作成功\",\n              });\n            })\n            .catch((e) => {\n              this.loading = false;\n              console.log(e);\n              this.$alert(e, \"网络请求发生错误\", {\n                confirmButtonText: \"确定\",\n                callback: (action) => {},\n              });\n            });\n        })\n        .catch((action) => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消\",\n          });\n        });\n    },\n  },\n  destroyed: function () {\n    // 每次离开当前界面时，清除定时器\n    clearInterval(this.timer);\n    this.timer = null;\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./alarm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./alarm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./alarm.vue?vue&type=template&id=469cae3c&\"\nimport script from \"./alarm.vue?vue&type=script&lang=js&\"\nexport * from \"./alarm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.isupf)?_c('el-select',{attrs:{\"placeholder\":\"请选择服务\",\"size\":\"small\",\"filterable\":\"\",\"clearable\":\"\"},on:{\"change\":_vm.changeService},model:{value:(_vm.serviceName),callback:function ($$v) {_vm.serviceName=$$v},expression:\"serviceName\"}},_vm._l((_vm.serviceOptions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1):_vm._e(),_c('el-select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请选择您的实例\",\"size\":\"small\",\"filterable\":\"\",\"clearable\":\"\"},on:{\"change\":_vm.changeInstance},model:{value:(_vm.instanceValue),callback:function ($$v) {_vm.instanceValue=$$v},expression:\"instanceValue\"}},_vm._l((_vm.instanceOptions),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.instanceId.split('#')[0],\"value\":item.instanceId}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <el-select\n    v-if=\"!isupf\"\n    v-model=\"serviceName\"\n    placeholder=\"请选择服务\"\n    size=\"small\"\n    @change=\"changeService\"\n    filterable\n    clearable>\n    <el-option\n      v-for=\"item in serviceOptions\"\n      :key=\"item\"\n      :label=\"item\"\n      :value=\"item\">\n    </el-option>\n  </el-select>\n\n  <el-select\n    v-model=\"instanceValue\"\n    placeholder=\"请选择您的实例\"\n    size=\"small\"\n    @change=\"changeInstance\"\n    filterable\n    clearable\n    style=\"width: 200px\">\n    <el-option\n      v-for=\"(item, index) in instanceOptions\"\n      :key=\"index\"\n      :label=\"item.instanceId.split('#')[0]\"\n      :value=\"item.instanceId\">\n    </el-option>\n  </el-select>\n</div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"instenceSelect\",\n  props: {\n    isupf: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data() {\n    return {\n      serviceName: \"\",\n      serviceOptions: [],\n      instanceOptions: [], //upf下面的实例\n      instanceValue: \"\", //当前选中的实例\n      // isFirst: true\n    }\n  },\n  computed: {\n   ...mapState(\"d2admin\", {\n      serviceList: (state) => state.instence.serviceList,\n      instenceList: (state) => state.instence.instenceList\n    })\n  },\n  watch: {\n    serviceList () {\n      this.serviceOptions = this.$store.state.d2admin.instence.serviceList\n      this.serviceName = this.serviceOptions[0]\n     },\n    instenceList () {\n      this.instanceOptions = this.$store.state.d2admin.instence.instenceList\n      this.instanceValue = this.instanceOptions[0].instanceId\n      this.$emit('changeInstence', this.instanceValue)\n     }\n  },\n  mounted() {\n    if(this.isupf) {\n      this.serviceName = 'upf'\n      this.$store.commit('d2admin/instence/setServiceName', 'upf')\n      this.$store.dispatch(\"d2admin/instence/commitInstenceList\")\n    } else {\n      if(this.$store.state.d2admin.instence.serviceList.length < 1) {\n        this.$store.dispatch(\"d2admin/instence/commitServiceList\")\n      } else {\n        this.serviceOptions = this.$store.state.d2admin.instence.serviceList\n        if(this.$store.state.d2admin.instence.serviceName) {\n          this.serviceName = this.$store.state.d2admin.instence.serviceName\n        }\n        if(this.$store.state.d2admin.instence.instenceList) {\n          this.instanceOptions = this.$store.state.d2admin.instence.instenceList\n        }\n        if(this.$store.state.d2admin.instence.instenceName) {\n          this.instanceValue = this.$store.state.d2admin.instence.instenceName.instanceId\n          this.$emit('changeInstence', this.instanceValue)\n        }\n      }\n    }\n    \n  },\n  methods: {\n    // 选择服务\n    changeService(val) {\n      if (!val) {\n        return;\n      }\n      this.$store.dispatch(\"d2admin/instence/commitInstenceList\", val)\n    },\n    // 选择实例\n    changeInstance(val) {\n      this.$emit('changeInstence', val)\n      this.$store.commit('d2admin/instence/setServiceName', val)\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instenceSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instenceSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./instenceSelect.vue?vue&type=template&id=06005f52&\"\nimport script from \"./instenceSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./instenceSelect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}