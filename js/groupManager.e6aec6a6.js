(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["groupManager"],{"32ad":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-container"},[r("el-tabs",{staticStyle:{"margin-top":"15px"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabMapOptions,(function(e){return r("el-tab-pane",{key:e.id,attrs:{label:e.name,name:e.code}},[r("keep-alive",[t.activeName==e.code?r("tab-pane",{attrs:{type:e.id}}):t._e()],1)],1)})),1)],1)},i=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",[r("el-col",{attrs:{span:24}},[r("el-button-group",[t.groupManager_btn_add?r("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handlerAdd}},[t._v("添加")]):t._e(),t.groupManager_btn_edit?r("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:t.handlerEdit}},[t._v("编辑")]):t._e(),t.groupManager_btn_del?r("el-button",{attrs:{type:"primary",icon:"delete"},on:{click:t.handleDelete}},[t._v("删除")]):t._e(),t.groupManager_btn_resourceManager?r("el-button",{attrs:{type:"primary"},on:{click:t.handlerAuthority}},[t._v("\r\n        权限分配")]):t._e(),t.groupManager_btn_userManager?r("el-button",{attrs:{type:"primary"},on:{click:t.handlerUser}},[t._v("\r\n        关联用户")]):t._e()],1)],1),r("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:8}},[r("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),r("el-tree",{ref:"groupTree",staticClass:"filter-tree",attrs:{data:t.treeData,"node-key":"id","highlight-current":"",props:t.defaultProps,"filter-node-method":t.filterNode,"default-expand-all":""},on:{"node-click":t.getNodeData}})],1),r("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:16}},[r("el-form",{ref:"form",attrs:{"label-position":t.labelPosition,"label-width":"80px",model:t.form}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-input",{attrs:{disabled:t.formEdit},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"编码"}},[r("el-input",{attrs:{disabled:t.formEdit},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{disabled:t.formEdit},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),"update"==t.formStatus?r("el-form-item",[t.groupManager_btn_edit?r("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("更新")]):t._e(),r("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1):t._e(),"create"==t.formStatus?r("el-form-item",[t.groupManager_btn_add?r("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("保存")]):t._e(),r("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1):t._e()],1)],1),r("el-dialog",{attrs:{title:t.dialogUserName,visible:t.dialogUserVisible},on:{"update:visible":function(e){t.dialogUserVisible=e}}},[r("group-user",{ref:"groupUser",attrs:{groupId:t.currentId},on:{closeUserDialog:t.closeUserDialog}})],1),r("el-dialog",{attrs:{title:t.dialogAuthorityName,size:"large",visible:t.dialogAuthorityVisible},on:{"update:visible":function(e){t.dialogAuthorityVisible=e}}},[r("group-authority",{ref:"groupAuthority",attrs:{groupId:t.currentId},on:{closeAuthorityDialog:t.closeAuthorityDialog}})],1)],1)},a=[],u=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),s=r("dabb"),l=r("2f62");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){Object(u["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var p={name:"groupDetail",components:{"group-user":function(){return r.e("chunk-4fdd1de8").then(r.bind(null,"3021"))},"group-authority":function(){return r.e("chunk-0c8cee4c").then(r.bind(null,"8061"))}},props:{type:{default:"1"}},data:function(){return{filterText:"",list:null,total:null,formEdit:!0,formAdd:!0,formStatus:"",dialogUserVisible:!1,dialogUserName:"关联用户",dialogAuthorityVisible:!1,dialogAuthorityName:"关联资源",listQuery:{groupType:this.type,name:void 0},treeData:[],defaultProps:{children:"children",label:"label"},labelPosition:"right",groupManager_btn_edit:!1,groupManager_btn_del:!1,groupManager_btn_add:!1,groupManager_btn_userManager:!1,groupManager_btn_resourceManager:!1,form:{code:void 0,name:void 0,description:void 0,groupType:this.type},currentId:-1}},watch:{filterText:function(t){this.$refs.groupTree.filter(t)}},created:function(){this.getList(),this.groupManager_btn_edit=this.hasPermissions(["groupManager:btn_edit"]),this.groupManager_btn_del=this.hasPermissions(["groupManager:btn_del"]),this.groupManager_btn_add=this.hasPermissions(["groupManager:btn_add"]),this.groupManager_btn_userManager=this.hasPermissions(["groupManager:btn_userManager"]),this.groupManager_btn_resourceManager=this.hasPermissions(["groupManager:btn_resourceManager"])},computed:d({},Object(l["c"])(["elements"])),methods:{getList:function(){var t=this;Object(s["d"])(this.listQuery).then((function(e){t.treeData=e}))},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},getNodeData:function(t){var e=this;this.formEdit||(this.formStatus="update"),Object(s["h"])(t.id).then((function(t){e.form=t})),this.currentId=t.id},handlerEdit:function(){this.form.id&&(this.formEdit=!1,this.formStatus="update")},handlerAdd:function(){this.resetForm(),this.formEdit=!1,this.formStatus="create"},handleDelete:function(){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(t.currentId).then((function(){t.getList(),t.resetForm(),t.onCancel(),t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})}))}))},update:function(){var t=this;Object(s["l"])(this.form.id,this.form).then((function(){t.getList(),t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})}))},create:function(){var t=this;Object(s["b"])(this.form).then((function(){t.getList(),t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})}))},onCancel:function(){this.formEdit=!0,this.formStatus=""},resetForm:function(){this.form={parentId:this.currentId,code:void 0,name:void 0,description:void 0,groupType:this.type}},handlerUser:function(){this.dialogUserVisible=!0,void 0!==this.$refs.groupUser&&(this.$refs.groupUser.groupId=this.currentId,this.$refs.groupUser.initUsers())},handlerAuthority:function(){this.dialogAuthorityVisible=!0,void 0!==this.$refs.groupAuthority&&(this.$refs.groupAuthority.groupId=this.currentId,this.$refs.groupAuthority.initAuthoritys())},closeUserDialog:function(){this.dialogUserVisible=!1},closeAuthorityDialog:function(){this.dialogAuthorityVisible=!1}}},f=p,g=r("2877"),m=Object(g["a"])(f,o,a,!1,null,null,null),h=m.exports,b={name:"group",components:{tabPane:h},data:function(){return{tabMapOptions:[],activeName:"role"}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;Object(s["e"])().then((function(e){t.tabMapOptions=e}))}}},y=b,_=(r("ef2d"),Object(g["a"])(y,n,i,!1,null,"0fa6242b",null));e["default"]=_.exports},"39c8":function(t,e,r){},dabb:function(t,e,r){"use strict";r.d(e,"e",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return a})),r.d(e,"h",(function(){return u})),r.d(e,"c",(function(){return s})),r.d(e,"l",(function(){return l})),r.d(e,"i",(function(){return c})),r.d(e,"k",(function(){return d})),r.d(e,"m",(function(){return p})),r.d(e,"a",(function(){return f})),r.d(e,"f",(function(){return g})),r.d(e,"j",(function(){return m})),r.d(e,"g",(function(){return h}));var n=r("9bd2");function i(){return Object(n["a"])({url:"/api/admin/groupType/all",method:"get"})}function o(t){return Object(n["a"])({url:"/api/admin/group/tree",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/api/admin/group",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/api/admin/group/"+t,method:"get"})}function s(t){return Object(n["a"])({url:"/api/admin/group/"+t,method:"delete"})}function l(t,e){return Object(n["a"])({url:"/api/admin/group/"+t,method:"put",data:e})}function c(t){return Object(n["a"])({url:"/api/admin/group/"+t+"/user",method:"get"})}function d(t,e){return Object(n["a"])({url:"/api/admin/group/"+t+"/user",method:"put",params:e})}function p(t,e){return Object(n["a"])({url:"/api/admin/group/"+t+"/authority/element/remove",method:"put",params:e})}function f(t,e){return Object(n["a"])({url:"/api/admin/group/"+t+"/authority/element/add",method:"put",params:e})}function g(t){return Object(n["a"])({url:"/api/admin/group/"+t+"/authority/element",method:"get"})}function m(t,e){return Object(n["a"])({url:"/api/admin/group/"+t+"/authority/menu",method:"put",params:e})}function h(t){return Object(n["a"])({url:"/api/admin/group/"+t+"/authority/menu",method:"get"})}},ef2d:function(t,e,r){"use strict";r("39c8")}}]);
//# sourceMappingURL=groupManager.e6aec6a6.js.map