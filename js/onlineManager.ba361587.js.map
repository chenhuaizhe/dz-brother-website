{"version":3,"sources":["webpack:///./src/pages/admin/online/index.vue?2e85","webpack:///./src/api/admin/online/index.js","webpack:///src/pages/admin/online/index.vue","webpack:///./src/pages/admin/online/index.vue?3eb3","webpack:///./src/pages/admin/online/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","slot","directives","name","rawName","value","expression","modifiers","key","tableKey","staticStyle","attrs","list","scopedSlots","_u","fn","scope","_v","_s","row","tokenId","userName","ipaddr","loginLocation","browser","os","Date","loginTime","arg","on","$event","handleForceLogout","listQuery","offset","limit","total","handleSizeChange","handleCurrentChange","$set","staticRenderFns","query","fetch","url","method","params","forceLogout","data","listLoading","queryParams","undefined","created","getList","methods","then","handleQuery","resetQuery","resetForm","val","$confirm","confirmButtonText","cancelButtonText","type","component"],"mappings":"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","file":"js/onlineManager.ba361587.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('d2-container',[_c('template',{slot:\"header\"}),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading.body\",value:(_vm.listLoading),expression:\"listLoading\",modifiers:{\"body\":true}}],key:_vm.tableKey,staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"size\":\"small\",\"stripe\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"会话编号\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.tokenId))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"登录名称\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.userName))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"主机\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.ipaddr))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"登录地点\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.loginLocation))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"浏览器\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.browser))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作系统\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.os))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"登录时间\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(new Date(scope.row.loginTime)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission:function\",value:(['onlineManager:btn_forceLogout']),expression:\"['onlineManager:btn_forceLogout']\",arg:\"function\"}],attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.handleForceLogout(scope.row)}}},[_vm._v(\"强退\")])]}}])})],1),_c('template',{slot:\"footer\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.listQuery.offset,\"page-sizes\":[10,20,30, 50],\"page-size\":_vm.listQuery.limit,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){return _vm.$set(_vm.listQuery, \"offset\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.listQuery, \"offset\", $event)}}})],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import fetch from '@/plugin/axios'\r\n\r\n// 查询在线用户列表\r\nexport function list (query) {\r\n  return fetch({\r\n    url: '/api/auth/online/page',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\n// 强退用户\r\nexport function forceLogout (tokenId) {\r\n  return fetch({\r\n    url: '/api/auth/online/' + tokenId,\r\n    method: 'delete'\r\n  })\r\n}\r\n","<template>\r\n  <d2-container>\r\n    <template slot=\"header\">\r\n    <!-- <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\">\r\n      <el-form-item label=\"登录地址\" prop=\"ipaddr\">\r\n        <el-input\r\n          v-model=\"queryParams.ipaddr\"\r\n          placeholder=\"请输入登录地址\"\r\n          clearable\r\n          size=\"small\"\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"用户名称\" prop=\"userName\">\r\n        <el-input\r\n          v-model=\"queryParams.userName\"\r\n          placeholder=\"请输入用户名称\"\r\n          clearable\r\n          size=\"small\"\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form> -->\r\n    </template>\r\n    <el-table :key='tableKey' :data=\"list\" v-loading.body=\"listLoading\" size=\"small\" stripe highlight-current-row\r\n      style=\"width: 100%\">\r\n      <el-table-column label=\"会话编号\" align=\"center\" >\r\n         <template slot-scope=\"scope\">\r\n          <span>{{scope.row.tokenId}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"登录名称\" align=\"center\" >\r\n         <template slot-scope=\"scope\">\r\n          <span>{{scope.row.userName}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"主机\" align=\"center\"  >\r\n        <template slot-scope=\"scope\">\r\n          <span>{{scope.row.ipaddr}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"登录地点\" align=\"center\" >\r\n        <template slot-scope=\"scope\">\r\n          <span>{{scope.row.loginLocation}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"浏览器\" align=\"center\" >\r\n        <template slot-scope=\"scope\">\r\n          <span>{{scope.row.browser}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作系统\" align=\"center\"  >\r\n        <template slot-scope=\"scope\">\r\n          <span>{{scope.row.os}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"登录时间\" align=\"center\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ new Date(scope.row.loginTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"handleForceLogout(scope.row)\"\r\n            v-permission:function=\"['onlineManager:btn_forceLogout']\"\r\n          >强退</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n        <template slot=\"footer\">\r\n\r\n <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n          :current-page.sync=\"listQuery.offset\" :page-sizes=\"[10,20,30, 50]\" :page-size=\"listQuery.limit\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\"> </el-pagination>\r\n        </template>\r\n  </d2-container>\r\n</template>\r\n\r\n<script>\r\nimport { list, forceLogout } from '@/api/admin/online/index'\r\n\r\nexport default {\r\n  name: 'Online',\r\n  data () {\r\n    return {\r\n      listQuery: {\r\n        offset: 0,\r\n        limit: 10\r\n      },\r\n      // 遮罩层\r\n      listLoading: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 表格数据\r\n      list: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        ipaddr: undefined,\r\n        userName: undefined\r\n      },\r\n      tableKey: 0\r\n\r\n    }\r\n  },\r\n  created () {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    /** 查询登录日志列表 */\r\n    getList () {\r\n      this.listLoading = true\r\n      list(this.listQuery).then(response => {\r\n        this.list = response.rows\r\n        this.total = response.total\r\n        this.listLoading = false\r\n      })\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery () {\r\n      this.offset = 1\r\n      this.getList()\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery () {\r\n      this.resetForm('queryForm')\r\n      this.handleQuery()\r\n    },\r\n    handleSizeChange (val) {\r\n      this.listQuery.limit = val\r\n      this.getList()\r\n    },\r\n    handleCurrentChange (val) {\r\n      this.listQuery.offset = val\r\n      this.getList()\r\n    },\r\n    /** 强退按钮操作 */\r\n    handleForceLogout (row) {\r\n      this.$confirm('是否确认强退名称为\"' + row.userName + '\"的数据项?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(function () {\r\n        return forceLogout(row.tokenId)\r\n      }).then(() => {\r\n        this.getList()\r\n        this.msgSuccess('强退成功')\r\n      }).catch(function () {})\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4e27b1a6&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}