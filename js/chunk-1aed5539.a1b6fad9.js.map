{"version":3,"sources":["webpack:///./src/pages/nms_sys/alarmInfo/capability.vue?e4c5","webpack:///src/pages/nms_sys/alarmInfo/capability.vue","webpack:///./src/pages/nms_sys/alarmInfo/capability.vue?ca77","webpack:///./src/pages/nms_sys/alarmInfo/capability.vue","webpack:///./src/pages/nms_sys/compoents/instenceSelect.vue?f75a","webpack:///src/pages/nms_sys/compoents/instenceSelect.vue","webpack:///./src/pages/nms_sys/compoents/instenceSelect.vue?372f","webpack:///./src/pages/nms_sys/compoents/instenceSelect.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","slot","attrs","on","changeInstance","staticClass","_v","staticStyle","setClick","_s","perform","traffic_ul_rx_packs","traffic_ul_rx_bytes","traffic_dl_tx_packs","traffic_ul_tx_bytes","traffic_ul_drop_packs","traffic_ul_drop_bytes","traffic_dl_rx_packs","traffic_dl_rx_bytes","traffic_dl_tx_bytes","traffic_dl_drop_packs","dialogVisible","handleClose","$event","ref","form","model","value","callback","$$v","$set","expression","submitConfig","staticRenderFns","components","name","data","stompClient3","instanceValue","report_switch","report_interval","report_permanent","mounted","connection","methods","getPerformConfig","request_type","instance_id","sequence_no","Authorization","connect","disconnect","stompClient","beforeDestroy","component","isupf","_e","changeService","serviceName","_l","item","key","index","instanceId","split","props","type","Boolean","default","serviceOptions","instanceOptions","$store","state","d2admin","instence","serviceList","instenceList","$emit","instenceName","commit","dispatch","val","console","log","instenceItem","length"],"mappings":"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","file":"js/chunk-1aed5539.a1b6fad9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('d2-container',[_c('template',{slot:\"header\"},[_c('instence-select',{attrs:{\"isupf\":false},on:{\"changeInstence\":_vm.changeInstance}})],1),_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"上下行吞吐量性能上报\")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.setClick}},[_vm._v(\"性能告警配置\")])],1),_c('p',[_vm._v(\"traffic_ul_rx_packs:\"+_vm._s(_vm.perform.traffic_ul_rx_packs))]),_c('p',[_vm._v(\"traffic_ul_rx_bytes:\"+_vm._s(_vm.perform.traffic_ul_rx_bytes))]),_c('p',[_vm._v(\"traffic_ul_tx_packs:\"+_vm._s(_vm.perform.traffic_dl_tx_packs))]),_c('p',[_vm._v(\"traffic_ul_tx_bytes:\"+_vm._s(_vm.perform.traffic_ul_tx_bytes))]),_c('p',[_vm._v(\"traffic_ul_drop_packs:\"+_vm._s(_vm.perform.traffic_ul_drop_packs))]),_c('p',[_vm._v(\"traffic_ul_drop_bytes:\"+_vm._s(_vm.perform.traffic_ul_drop_bytes))]),_c('p',[_vm._v(\"traffic_dl_rx_packs:\"+_vm._s(_vm.perform.traffic_dl_rx_packs))]),_c('p',[_vm._v(\"traffic_dl_rx_bytes:\"+_vm._s(_vm.perform.traffic_dl_rx_bytes))]),_c('p',[_vm._v(\"traffic_dl_tx_packs:\"+_vm._s(_vm.perform.traffic_dl_tx_packs))]),_c('p',[_vm._v(\"traffic_dl_tx_bytes:\"+_vm._s(_vm.perform.traffic_dl_tx_bytes))]),_c('p',[_vm._v(\"traffic_dl_drop_packs:\"+_vm._s(_vm.perform.traffic_dl_drop_packs))]),_c('p',[_vm._v(\"traffic_dl_drop_bytes:\"+_vm._s(_vm.perform.traffic_dl_drop_packs))])]),_c('el-dialog',{attrs:{\"title\":\"性能上报配置\",\"visible\":_vm.dialogVisible,\"width\":\"600px\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"130px\"}},[_c('el-form-item',{attrs:{\"label\":\"Respot Switch\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:(_vm.form.respot_switch),callback:function ($$v) {_vm.$set(_vm.form, \"respot_switch\", $$v)},expression:\"form.respot_switch\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Report Interval\"}},[_c('el-input',{model:{value:(_vm.form.report_interval),callback:function ($$v) {_vm.$set(_vm.form, \"report_interval\", $$v)},expression:\"form.report_interval\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Report Permanent\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:(_vm.form.report_permanent),callback:function ($$v) {_vm.$set(_vm.form, \"report_permanent\", $$v)},expression:\"form.report_permanent\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitConfig}},[_vm._v(\"确 定\")])],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <d2-container>\n    <template slot=\"header\">\n      <instence-select :isupf=\"false\" @changeInstence=\"changeInstance\"></instence-select>\n    </template>\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>上下行吞吐量性能上报</span>\n        <el-button\n          style=\"float: right; padding: 3px 0\"\n          type=\"text\"\n          @click=\"setClick\"\n          >性能告警配置</el-button\n        >\n      </div>\n      <p>traffic_ul_rx_packs:{{ perform.traffic_ul_rx_packs }}</p>\n      <p>traffic_ul_rx_bytes:{{ perform.traffic_ul_rx_bytes }}</p>\n      <p>traffic_ul_tx_packs:{{ perform.traffic_dl_tx_packs }}</p>\n      <p>traffic_ul_tx_bytes:{{ perform.traffic_ul_tx_bytes }}</p>\n      <p>traffic_ul_drop_packs:{{ perform.traffic_ul_drop_packs }}</p>\n      <p>traffic_ul_drop_bytes:{{ perform.traffic_ul_drop_bytes }}</p>\n      <p>traffic_dl_rx_packs:{{ perform.traffic_dl_rx_packs }}</p>\n      <p>traffic_dl_rx_bytes:{{ perform.traffic_dl_rx_bytes }}</p>\n      <p>traffic_dl_tx_packs:{{ perform.traffic_dl_tx_packs }}</p>\n      <p>traffic_dl_tx_bytes:{{ perform.traffic_dl_tx_bytes }}</p>\n      <p>traffic_dl_drop_packs:{{ perform.traffic_dl_drop_packs }}</p>\n      <p>traffic_dl_drop_bytes:{{ perform.traffic_dl_drop_packs }}</p>\n    </el-card>\n\n    <el-dialog\n      title=\"性能上报配置\"\n      :visible.sync=\"dialogVisible\"\n      width=\"600px\"\n      :before-close=\"handleClose\"\n    >\n      <el-form ref=\"form\" :model=\"form\" label-width=\"130px\">\n        <el-form-item label=\"Respot Switch\">\n          <el-switch\n            v-model=\"form.respot_switch\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#ff4949\"\n          ></el-switch>\n        </el-form-item>\n        <el-form-item label=\"Report Interval\">\n          <el-input v-model=\"form.report_interval\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Report Permanent\">\n          <el-switch\n            v-model=\"form.report_permanent\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#ff4949\"\n          ></el-switch>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitConfig\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </d2-container>\n</template>\n\n<script>\nimport SockJS from \"sockjs-client\";\nimport Stomp from \"stompjs\";\nimport {\n  fetchGetServiceList,\n  fetchGetInstanceList,\n  fetchGetPerformConfig,\n  fetchSetPerformConfig,\n} from \"@/api/demo/index\";\nimport instenceSelect from '../compoents/instenceSelect.vue';\nexport default {\n  components: { instenceSelect },\n  name: \"alarm\",\n  data() {\n    return {\n      stompClient3: null,\n      perform: {},\n      dialogVisible: false,\n      instanceValue: \"\", //当前选中的实例\n      form: {\n        report_switch: false,\n        report_interval: null,\n        report_permanent: false,\n      },\n    };\n  },\n  mounted() {\n    // this.getService();\n    this.connection();\n  },\n  methods: {\n    // 选择实例\n    // changeInstanc(val) {\n    //   if (!val) {\n    //     return;\n    //   }\n    //   this.connection();\n    // },\n    setClick() {\n      this.dialogVisible = true;\n      this.getPerformConfig();\n    },\n    getPerformConfig() {\n      fetchGetPerformConfig({\n        request_type: \"perform config get\",\n        instance_id: this.instanceValue,\n        sequence_no: 4001,\n      })\n        .then((response) => {\n          this.form = response;\n          clearInterval(this.timer);\n          this.timer = null;\n          this.setTimer();\n        })\n        .catch((e) => {\n          console.log(e);\n          this.$alert(e, \"网络请求发生错误\", {\n            confirmButtonText: \"确定\",\n            callback: (action) => {},\n          });\n        });\n    },\n    submitConfig() {\n      this.dialogVisible = false;\n      fetchSetPerformConfig({\n        request_type: \"perform config set\",\n        instance_id: this.instanceValue,\n        sequence_no: 4002,\n        data: this.form,\n      })\n        .then((response) => {})\n        .catch((e) => {\n          console.log(e);\n          this.$alert(e, \"网络请求发生错误\", {\n            confirmButtonText: \"确定\",\n            callback: (action) => {},\n          });\n        });\n    },\n    handleClose() {\n      this.dialogVisible = false;\n    },\n    connection() {\n      // 建立连接对象\n      let socket3 = new SockJS(\"http://holer.cc:50469/alarm-info\");\n      // 获取STOMP子协议的客户端对象\n      this.stompClient3 = Stomp.over(socket3);\n      // 定义客户端的认证信息,按需求配置\n      let headers = {\n        Authorization: \"\",\n      };\n      this.stompClient3.connect(\n        headers,\n        () => {\n          this.stompClient3.subscribe(\n            \"/alarm/perform\",\n            (val) => {\n              console.log(val);\n              this.perform = JSON.parse(val.body);\n            },\n            headers\n          );\n        },\n        (err) => {\n          // 连接发生错误时的处理函数\n          console.log(\"失败\");\n          console.log(err);\n        }\n      );\n    }, //连接 后台\n    disconnect() {\n      if (this.stompClient) {\n        this.stompClient.disconnect();\n      }\n    }, // 断开连接\n  },\n  beforeDestroy: function () {\n    // 页面离开时断开连接,清除定时器\n    this.disconnect();\n    //   clearInterval(this.timer);\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./capability.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./capability.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./capability.vue?vue&type=template&id=969a5b1a&\"\nimport script from \"./capability.vue?vue&type=script&lang=js&\"\nexport * from \"./capability.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.isupf)?_c('el-select',{attrs:{\"placeholder\":\"请选择服务\",\"size\":\"small\",\"filterable\":\"\",\"clearable\":\"\"},on:{\"change\":_vm.changeService},model:{value:(_vm.serviceName),callback:function ($$v) {_vm.serviceName=$$v},expression:\"serviceName\"}},_vm._l((_vm.serviceOptions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1):_vm._e(),_c('el-select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请选择您的实例\",\"size\":\"small\",\"filterable\":\"\",\"clearable\":\"\"},on:{\"change\":_vm.changeInstance},model:{value:(_vm.instanceValue),callback:function ($$v) {_vm.instanceValue=$$v},expression:\"instanceValue\"}},_vm._l((_vm.instanceOptions),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.instanceId.split('#')[0],\"value\":item.instanceId}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <el-select\n    v-if=\"!isupf\"\n    v-model=\"serviceName\"\n    placeholder=\"请选择服务\"\n    size=\"small\"\n    @change=\"changeService\"\n    filterable\n    clearable>\n    <el-option\n      v-for=\"item in serviceOptions\"\n      :key=\"item\"\n      :label=\"item\"\n      :value=\"item\">\n    </el-option>\n  </el-select>\n\n  <el-select\n    v-model=\"instanceValue\"\n    placeholder=\"请选择您的实例\"\n    size=\"small\"\n    @change=\"changeInstance\"\n    filterable\n    clearable\n    style=\"width: 200px\">\n    <el-option\n      v-for=\"(item, index) in instanceOptions\"\n      :key=\"index\"\n      :label=\"item.instanceId.split('#')[0]\"\n      :value=\"item.instanceId\">\n    </el-option>\n  </el-select>\n</div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"instenceSelect\",\n  props: {\n    isupf: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data() {\n    return {\n      serviceName: null,\n      serviceOptions: [],\n      instanceOptions: [], //upf下面的实例\n      instanceValue: null, //当前选中的实例\n    }\n  },\n  computed: {\n   ...mapState(\"d2admin\", {\n      serviceList: (state) => state.instence.serviceList,\n      instenceList: (state) => state.instence.instenceList\n    })\n  },\n  watch: {\n    serviceList () {\n      this.serviceOptions = this.$store.state.d2admin.instence.serviceList\n      this.serviceName = this.serviceOptions[0]\n     },\n    instenceList () {\n      this.instanceOptions = this.$store.state.d2admin.instence.instenceList\n      this.instanceValue = this.instanceOptions[0].instanceId\n      this.$emit('changeInstence', this.instanceValue)\n     }\n  },\n  mounted() {\n    if(this.isupf) {\n      if (this.$store.state.d2admin.instence.serviceName && this.$store.state.d2admin.instence.serviceName === 'upf') {\n        if(this.$store.state.d2admin.instence.instenceList) {\n          this.instanceOptions = this.$store.state.d2admin.instence.instenceList\n        }\n        if(this.$store.state.d2admin.instence.instenceName) {\n          this.instanceValue = this.$store.state.d2admin.instence.instenceName.instanceId\n          this.$emit('changeInstence', this.instanceValue)\n        }\n      } else {\n        this.serviceName = 'upf'\n        this.$store.commit('d2admin/instence/setServiceName', 'upf')\n        this.$store.dispatch(\"d2admin/instence/commitInstenceList\")\n      }\n    } else {\n      if(this.$store.state.d2admin.instence.serviceList.length < 1) {\n        this.$store.dispatch(\"d2admin/instence/commitServiceList\")\n      } else {\n        this.serviceOptions = this.$store.state.d2admin.instence.serviceList\n        if(this.$store.state.d2admin.instence.serviceName) {\n          this.serviceName = this.$store.state.d2admin.instence.serviceName\n        }\n        if(this.$store.state.d2admin.instence.instenceList) {\n          this.instanceOptions = this.$store.state.d2admin.instence.instenceList\n        }\n        if(this.$store.state.d2admin.instence.instenceName) {\n          this.instanceValue = this.$store.state.d2admin.instence.instenceName.instanceId\n          this.$emit('changeInstence', this.instanceValue)\n        }\n      }\n    }\n    \n  },\n  methods: {\n    // 选择服务\n    changeService(val) {\n      if (!val) {\n        return;\n      }\n      this.$store.dispatch(\"d2admin/instence/commitInstenceList\", val)\n    },\n    // 选择实例\n    changeInstance(val) {\n      if (val) {\n        this.$emit('changeInstence', val)\n        console.log('哈哈');\n        console.log(val);\n        let instenceItem = this.instanceOptions.filter(item => item.instanceId === val)\n        if (instenceItem && instenceItem.length > 0) {\n          this.$store.commit('d2admin/instence/setInstenceName', instenceItem[0])\n        }\n        console.log(instenceItem);\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instenceSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instenceSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./instenceSelect.vue?vue&type=template&id=44e08053&\"\nimport script from \"./instenceSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./instenceSelect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}