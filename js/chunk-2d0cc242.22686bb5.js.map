{"version":3,"sources":["webpack:///./src/layout/header-aside/components/tabs/index.vue?4365","webpack:///src/layout/header-aside/components/tabs/index.vue","webpack:///./src/layout/header-aside/components/tabs/index.vue?1435","webpack:///./src/layout/header-aside/components/tabs/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","contextmenuFlag","contentmenuX","contentmenuY","on","$event","tagName","contextmenuListIndex","contextmenuList","contextmenuClick","current","handleClick","handleTabsEdit","nativeOn","handleContextmenu","_l","page","index","key","meta","title","name","handleControlBtnClick","command","handleControlItemClick","slot","_v","staticRenderFns","components","D2Contextmenu","D2ContextmenuList","data","computed","methods","target","className","indexOf","flag","parentNode","event","preventDefault","stopPropagation","clientX","clientY","getAttribute","slice","pageSelect","vm","closeLeft","params","closeRight","closeOther","closeAll","$message","error","$router","push","action","close","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iCAAiCC,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,MAAM,CAACE,YAAY,mCAAmCC,MAAM,CAAC,WAAW,MAAM,CAACH,EAAG,MAAM,CAACE,YAAY,0CAA0C,CAACF,EAAG,iBAAiB,CAACG,MAAM,CAAC,QAAUP,EAAIQ,gBAAgB,EAAIR,EAAIS,aAAa,EAAIT,EAAIU,cAAcC,GAAG,CAAC,iBAAiB,SAASC,GAAQZ,EAAIQ,gBAAgBI,KAAU,CAACR,EAAG,sBAAsB,CAACG,MAAM,CAAC,SAA2B,UAAhBP,EAAIa,QAAsBb,EAAIc,qBAAuBd,EAAIe,iBAAiBJ,GAAG,CAAC,SAAWX,EAAIgB,qBAAqB,GAAGZ,EAAG,UAAU,CAACE,YAAY,2BAA2BC,MAAM,CAAC,MAAQP,EAAIiB,QAAQ,KAAO,OAAO,UAAW,GAAMN,GAAG,CAAC,YAAYX,EAAIkB,YAAY,KAAOlB,EAAImB,gBAAgBC,SAAS,CAAC,YAAc,SAASR,GAAQ,OAAOZ,EAAIqB,kBAAkBT,MAAWZ,EAAIsB,GAAItB,EAAU,QAAE,SAASuB,EAAKC,GAAO,OAAOpB,EAAG,cAAc,CAACqB,IAAID,EAAMjB,MAAM,CAAC,MAAQgB,EAAKG,KAAKC,OAAS,MAAM,KAAOJ,EAAKK,WAAU,IAAI,KAAKxB,EAAG,MAAM,CAACE,YAAY,+BAA+BC,MAAM,CAAC,WAAW,MAAM,CAACH,EAAG,cAAc,CAACG,MAAM,CAAC,KAAO,UAAU,eAAe,IAAII,GAAG,CAAC,MAAQX,EAAI6B,sBAAsB,QAAU,SAAUC,GAAW,OAAO9B,EAAI+B,uBAAuBD,MAAc,CAAC1B,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,kBAAkBH,EAAG,mBAAmB,CAACG,MAAM,CAAC,KAAO,YAAYyB,KAAK,YAAY,CAAC5B,EAAG,mBAAmB,CAACG,MAAM,CAAC,QAAU,SAAS,CAACH,EAAG,UAAU,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,gBAAgBP,EAAIiC,GAAG,+BAA+B,GAAG7B,EAAG,mBAAmB,CAACG,MAAM,CAAC,QAAU,UAAU,CAACH,EAAG,UAAU,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,iBAAiBP,EAAIiC,GAAG,+BAA+B,GAAG7B,EAAG,mBAAmB,CAACG,MAAM,CAAC,QAAU,UAAU,CAACH,EAAG,UAAU,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,WAAWP,EAAIiC,GAAG,+BAA+B,GAAG7B,EAAG,mBAAmB,CAACG,MAAM,CAAC,QAAU,QAAQ,CAACH,EAAG,UAAU,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,kBAAkBP,EAAIiC,GAAG,+BAA+B,IAAI,IAAI,IAAI,MACrgEC,EAAkB,G,wpBC6DtB,OACEC,WAAY,CACVC,cAAe,WAAnB,wDACIC,kBAAmB,WAAvB,yDAEEC,KALF,WAMI,MAAO,CACL9B,iBAAiB,EACjBC,aAAc,EACdC,aAAc,EACdI,qBAAsB,CAC5B,CAAQ,KAAR,eAAQ,MAAR,OAAQ,MAAR,QAEMC,gBAAiB,CACvB,CAAQ,KAAR,aAAQ,MAAR,OAAQ,MAAR,QACA,CAAQ,KAAR,cAAQ,MAAR,OAAQ,MAAR,SACA,CAAQ,KAAR,QAAQ,MAAR,OAAQ,MAAR,SACA,CAAQ,KAAR,eAAQ,MAAR,OAAQ,MAAR,QAEMF,QAAS,UAGb0B,SAAU,EAAZ,GACA,+BACA,SACA,aAGEC,QAAS,EAAX,KACA,+BACA,QACA,YACA,aACA,aACA,cANA,IAWInB,kBAXJ,SAWA,GACM,IAAN,WAEA,KACUoB,EAAOC,UAAUC,QAAQ,kBAAoB,EAAGC,GAAO,EACjE,qDACQH,EAASA,EAAOI,WAChBD,GAAO,GAELA,IACFE,EAAMC,iBACND,EAAME,kBACN/C,KAAKQ,aAAeqC,EAAMG,QAC1BhD,KAAKS,aAAeoC,EAAMI,QAC1BjD,KAAKY,QAAU4B,EAAOU,aAAa,iBAAiBC,MAAM,GAC1DnD,KAAKO,iBAAkB,IAM3BQ,iBAhCJ,SAgCA,GACMf,KAAK8B,uBAAuBD,EAAS7B,KAAKY,UAK5CkB,uBAtCJ,SAsCA,qEACUlB,IACFZ,KAAKO,iBAAkB,GAEzB,IAAN,GACQ6C,WAAYxC,EACZyC,GAAIrD,MAEN,OAAQ6B,GACN,IAAK,OACH7B,KAAKsD,UAAUC,GACf,MACF,IAAK,QACHvD,KAAKwD,WAAWD,GAChB,MACF,IAAK,QACHvD,KAAKyD,WAAWF,GAChB,MACF,IAAK,MACHvD,KAAK0D,SAAS1D,MACd,MACF,QACEA,KAAK2D,SAASC,MAAM,SACpB,QAMNhC,sBAnEJ,WAoEM5B,KAAK0D,SAAS1D,OAKhBiB,YAzEJ,SAyEA,KAEM,IAAN,0DACA,8BACUK,GACFtB,KAAK6D,QAAQC,KAAK,CAA1B,2BAMI5C,eApFJ,SAoFA,KACqB,WAAX6C,GACF/D,KAAKgE,MAAM,CACTpD,QAAV,EACUyC,GAAIrD,WClL8W,I,YCOxXiE,EAAY,eACd,EACAnE,EACAmC,GACA,EACA,KACA,KACA,MAIa,aAAAgC,E","file":"js/chunk-2d0cc242.22686bb5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d2-multiple-page-control-group\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"d2-multiple-page-control-content\",attrs:{\"flex-box\":\"1\"}},[_c('div',{staticClass:\"d2-multiple-page-control-content-inner\"},[_c('d2-contextmenu',{attrs:{\"visible\":_vm.contextmenuFlag,\"x\":_vm.contentmenuX,\"y\":_vm.contentmenuY},on:{\"update:visible\":function($event){_vm.contextmenuFlag=$event}}},[_c('d2-contextmenu-list',{attrs:{\"menulist\":_vm.tagName === 'index' ? _vm.contextmenuListIndex : _vm.contextmenuList},on:{\"rowClick\":_vm.contextmenuClick}})],1),_c('el-tabs',{staticClass:\"d2-multiple-page-control\",attrs:{\"value\":_vm.current,\"type\":\"card\",\"closable\":true},on:{\"tab-click\":_vm.handleClick,\"edit\":_vm.handleTabsEdit},nativeOn:{\"contextmenu\":function($event){return _vm.handleContextmenu($event)}}},_vm._l((_vm.opened),function(page,index){return _c('el-tab-pane',{key:index,attrs:{\"label\":page.meta.title || '未命名',\"name\":page.name}})}),1)],1)]),_c('div',{staticClass:\"d2-multiple-page-control-btn\",attrs:{\"flex-box\":\"0\"}},[_c('el-dropdown',{attrs:{\"size\":\"default\",\"split-button\":\"\"},on:{\"click\":_vm.handleControlBtnClick,\"command\":function (command) { return _vm.handleControlItemClick(command); }}},[_c('d2-icon',{attrs:{\"name\":\"times-circle\"}}),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"left\"}},[_c('d2-icon',{staticClass:\"d2-mr-10\",attrs:{\"name\":\"arrow-left\"}}),_vm._v(\"\\n          关闭左侧\\n        \")],1),_c('el-dropdown-item',{attrs:{\"command\":\"right\"}},[_c('d2-icon',{staticClass:\"d2-mr-10\",attrs:{\"name\":\"arrow-right\"}}),_vm._v(\"\\n          关闭右侧\\n        \")],1),_c('el-dropdown-item',{attrs:{\"command\":\"other\"}},[_c('d2-icon',{staticClass:\"d2-mr-10\",attrs:{\"name\":\"times\"}}),_vm._v(\"\\n          关闭其它\\n        \")],1),_c('el-dropdown-item',{attrs:{\"command\":\"all\"}},[_c('d2-icon',{staticClass:\"d2-mr-10\",attrs:{\"name\":\"times-circle\"}}),_vm._v(\"\\n          全部关闭\\n        \")],1)],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"d2-multiple-page-control-group\" flex>\r\n    <div class=\"d2-multiple-page-control-content\" flex-box=\"1\">\r\n      <div class=\"d2-multiple-page-control-content-inner\">\r\n        <d2-contextmenu\r\n          :visible.sync=\"contextmenuFlag\"\r\n          :x=\"contentmenuX\"\r\n          :y=\"contentmenuY\">\r\n          <d2-contextmenu-list\r\n            :menulist=\"tagName === 'index' ? contextmenuListIndex : contextmenuList\"\r\n            @rowClick=\"contextmenuClick\"/>\r\n        </d2-contextmenu>\r\n        <el-tabs\r\n          class=\"d2-multiple-page-control\"\r\n          :value=\"current\"\r\n          type=\"card\"\r\n          :closable=\"true\"\r\n          @tab-click=\"handleClick\"\r\n          @edit=\"handleTabsEdit\"\r\n          @contextmenu.native=\"handleContextmenu\">\r\n          <el-tab-pane\r\n            v-for=\"(page, index) in opened\"\r\n            :key=\"index\"\r\n            :label=\"page.meta.title || '未命名'\"\r\n            :name=\"page.name\"/>\r\n        </el-tabs>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"d2-multiple-page-control-btn\"\r\n      flex-box=\"0\">\r\n      <el-dropdown\r\n        size=\"default\"\r\n        split-button\r\n        @click=\"handleControlBtnClick\"\r\n        @command=\"command => handleControlItemClick(command)\">\r\n        <d2-icon name=\"times-circle\"/>\r\n        <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item command=\"left\">\r\n            <d2-icon name=\"arrow-left\" class=\"d2-mr-10\"/>\r\n            关闭左侧\r\n          </el-dropdown-item>\r\n          <el-dropdown-item command=\"right\">\r\n            <d2-icon name=\"arrow-right\" class=\"d2-mr-10\"/>\r\n            关闭右侧\r\n          </el-dropdown-item>\r\n          <el-dropdown-item command=\"other\">\r\n            <d2-icon name=\"times\" class=\"d2-mr-10\"/>\r\n            关闭其它\r\n          </el-dropdown-item>\r\n          <el-dropdown-item command=\"all\">\r\n            <d2-icon name=\"times-circle\" class=\"d2-mr-10\"/>\r\n            全部关闭\r\n          </el-dropdown-item>\r\n        </el-dropdown-menu>\r\n      </el-dropdown>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex'\r\nexport default {\r\n  components: {\r\n    D2Contextmenu: () => import('../contextmenu'),\r\n    D2ContextmenuList: () => import('../contextmenu/components/contentmenuList')\r\n  },\r\n  data () {\r\n    return {\r\n      contextmenuFlag: false,\r\n      contentmenuX: 0,\r\n      contentmenuY: 0,\r\n      contextmenuListIndex: [\r\n        { icon: 'times-circle', title: '关闭全部', value: 'all' }\r\n      ],\r\n      contextmenuList: [\r\n        { icon: 'arrow-left', title: '关闭左侧', value: 'left' },\r\n        { icon: 'arrow-right', title: '关闭右侧', value: 'right' },\r\n        { icon: 'times', title: '关闭其它', value: 'other' },\r\n        { icon: 'times-circle', title: '关闭全部', value: 'all' }\r\n      ],\r\n      tagName: 'index'\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('d2admin/page', [\r\n      'opened',\r\n      'current'\r\n    ])\r\n  },\r\n  methods: {\r\n    ...mapActions('d2admin/page', [\r\n      'close',\r\n      'closeLeft',\r\n      'closeRight',\r\n      'closeOther',\r\n      'closeAll'\r\n    ]),\r\n    /**\r\n     * @description 右键菜单功能点击\r\n     */\r\n    handleContextmenu (event) {\r\n      let target = event.target\r\n      // 解决 https://github.com/d2-projects/d2-admin/issues/54\r\n      let flag = false\r\n      if (target.className.indexOf('el-tabs__item') > -1) flag = true\r\n      else if (target.parentNode.className.indexOf('el-tabs__item') > -1) {\r\n        target = target.parentNode\r\n        flag = true\r\n      }\r\n      if (flag) {\r\n        event.preventDefault()\r\n        event.stopPropagation()\r\n        this.contentmenuX = event.clientX\r\n        this.contentmenuY = event.clientY\r\n        this.tagName = target.getAttribute('aria-controls').slice(5)\r\n        this.contextmenuFlag = true\r\n      }\r\n    },\r\n    /**\r\n     * @description 右键菜单的row-click事件\r\n     */\r\n    contextmenuClick (command) {\r\n      this.handleControlItemClick(command, this.tagName)\r\n    },\r\n    /**\r\n     * @description 接收点击关闭控制上选项的事件\r\n     */\r\n    handleControlItemClick (command, tagName = null) {\r\n      if (tagName) {\r\n        this.contextmenuFlag = false\r\n      }\r\n      const params = {\r\n        pageSelect: tagName,\r\n        vm: this\r\n      }\r\n      switch (command) {\r\n        case 'left':\r\n          this.closeLeft(params)\r\n          break\r\n        case 'right':\r\n          this.closeRight(params)\r\n          break\r\n        case 'other':\r\n          this.closeOther(params)\r\n          break\r\n        case 'all':\r\n          this.closeAll(this)\r\n          break\r\n        default:\r\n          this.$message.error('无效的操作')\r\n          break\r\n      }\r\n    },\r\n    /**\r\n     * @description 接收点击关闭控制上按钮的事件\r\n     */\r\n    handleControlBtnClick () {\r\n      this.closeAll(this)\r\n    },\r\n    /**\r\n     * @description 接收点击 tab 标签的事件\r\n     */\r\n    handleClick (tab, event) {\r\n      // 找到点击的页面在 tag 列表里是哪个\r\n      const page = this.opened.find(page => page.name === tab.name)\r\n      const { name, params, query } = page\r\n      if (page) {\r\n        this.$router.push({ name, params, query })\r\n      }\r\n    },\r\n    /**\r\n     * @description 点击 tab 上的删除按钮触发这里 首页的删除按钮已经隐藏 因此这里不用判断是 index\r\n     */\r\n    handleTabsEdit (tagName, action) {\r\n      if (action === 'remove') {\r\n        this.close({\r\n          tagName,\r\n          vm: this\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3a7563a5&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}